"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.init = void 0;

var _coreEvents = require("@storybook/core-events");

var init = function init(_ref) {
  var store = _ref.store,
      fullAPI = _ref.fullAPI;
  var api = {
    updateGlobalArgs: function updateGlobalArgs(newGlobalArgs) {
      fullAPI.emit(_coreEvents.UPDATE_GLOBAL_ARGS, newGlobalArgs);
    }
  };
  var state = {
    // Currently global args always start empty. TODO -- should this be set on the channel at init time?
    globalArgs: {}
  };

  var initModule = function initModule() {
    fullAPI.on(_coreEvents.GLOBAL_ARGS_UPDATED, function (globalArgs) {
      return store.setState({
        globalArgs: globalArgs
      });
    });
  };

  return {
    api: api,
    state: state,
    init: initModule
  };
};

exports.init = init;