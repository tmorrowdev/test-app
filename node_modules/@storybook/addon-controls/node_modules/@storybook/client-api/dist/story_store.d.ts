import { Channel } from '@storybook/channels';
import { StoryId, ViewMode, Parameters, Args, LegacyStoryFn, StoryKind } from '@storybook/addons';
import { DecoratorFunction, StoryMetadata, StoreData, AddStoryArgs, PublishedStoreItem, ErrorLike, GetStorybookKind, ArgTypesEnhancer } from './types';
interface Selection {
    storyId: StoryId;
    viewMode: ViewMode;
}
interface StoryOptions {
    includeDocsOnly?: boolean;
}
declare type KindMetadata = StoryMetadata & {
    order: number;
};
interface AllowUnsafeOption {
    allowUnsafe?: boolean;
}
export default class StoryStore {
    _error?: ErrorLike;
    _channel: Channel;
    _configuring: boolean;
    _globalArgs: Args;
    _globalMetadata: StoryMetadata;
    _kinds: Record<string, KindMetadata>;
    _stories: StoreData;
    _argTypesEnhancers: ArgTypesEnhancer[];
    _selection: Selection;
    constructor(params: {
        channel: Channel;
    });
    setupListeners(): void;
    startConfiguring(): void;
    finishConfiguring(): void;
    addGlobalMetadata({ parameters, decorators }: StoryMetadata): void;
    clearGlobalDecorators(): void;
    ensureKind(kind: string): void;
    addKindMetadata(kind: string, { parameters, decorators }: StoryMetadata): void;
    addArgTypesEnhancer(argTypesEnhancer: ArgTypesEnhancer): void;
    combineStoryParameters(parameters: Parameters, kind: StoryKind): any;
    addStory({ id, kind, name, storyFn: original, parameters: storyParameters, decorators: storyDecorators, }: AddStoryArgs, { applyDecorators, allowUnsafe, }: {
        applyDecorators: (fn: LegacyStoryFn, decorators: DecoratorFunction[]) => any;
    } & AllowUnsafeOption): void;
    remove: (id: string, { allowUnsafe }?: AllowUnsafeOption) => void;
    removeStoryKind(kind: string, { allowUnsafe }?: AllowUnsafeOption): void;
    updateGlobalArgs(newGlobalArgs: Args): void;
    updateStoryArgs(id: string, newArgs: Args): void;
    fromId: (id: string) => PublishedStoreItem | null;
    raw(options?: StoryOptions): PublishedStoreItem[];
    extract(options?: StoryOptions & {
        normalizeParameters?: boolean;
    }): {};
    clearError(): void;
    setError: (err: ErrorLike) => void;
    getError: () => ErrorLike | undefined;
    setSelection(selection: Selection): void;
    getSelection: () => Selection;
    getDataForManager: () => {
        v: number;
        globalParameters: Parameters;
        error: ErrorLike;
        kindParameters: {
            [x: string]: Parameters;
        };
        stories: {};
    };
    pushToManager: () => void;
    getStoryKinds(): string[];
    getStoriesForKind(kind: string): PublishedStoreItem[];
    getRawStory(kind: string, name: string): PublishedStoreItem;
    cleanHooks(id: string): void;
    cleanHooksForKind(kind: string): void;
    getStorybook(): GetStorybookKind[];
    private mergeAdditionalDataToStory;
}
export {};
